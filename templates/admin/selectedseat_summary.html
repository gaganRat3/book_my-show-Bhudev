{% extends "admin/base_site.html" %} {% block content %}
<h1>Selected Seat Summary</h1>
<form method="get" style="margin-bottom: 16px">
  <input
    type="text"
    name="search"
    placeholder="Search by user, phone, seat..."
    value="{{ search|default:'' }}"
    style="padding: 6px 12px; border-radius: 6px; border: 1px solid #ccc"
  />
  <button
    type="submit"
    style="
      padding: 6px 18px;
      background: #1976d2;
      color: #fff;
      border-radius: 6px;
      border: none;
      font-weight: 600;
    "
  >
    Search
  </button>
</form>
<a
  href="/admin/core/landingformdata/selectedseat-summary/export/"
  style="
    display: inline-block;
    margin-bottom: 16px;
    padding: 8px 18px;
    background: #1976d2;
    color: #fff;
    border-radius: 6px;
    text-decoration: none;
    font-weight: 600;
  "
  >Export to Excel</a
>
<table border="1" cellpadding="5" cellspacing="0">
  <thead>
    <tr>
      <th>User Name</th>
      <th>Phone</th>
      <th>Seats</th>
      <th>Total Paid</th>
      <th>Earliest Booking</th>
      <th>Payment Screenshot</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    {% for row in report %}
    <tr>
      <td>{{ row.user }}</td>
      <td>{{ row.phone }}</td>
      <td>{{ row.seats }}</td>
      <td>â‚¹{{ row.total_paid }}</td>
      <td>{{ row.selected_at }}</td>
      <td>
        {% if row.screenshot_url %}
        <img src="{{ row.screenshot_url }}" width="100" style="object-fit: contain" />
        {% else %} No Screenshot {% endif %}
      </td>
      <td>
        <a href="/admin/core/landingformdata/selectedseat-summary/edit/{{ row.id }}/">Edit</a> |
        <a href="/admin/core/landingformdata/{{ row.id }}/delete/">Delete</a>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
<div style="margin-top:32px; display: flex; justify-content: center; align-items: center;">
  <nav aria-label="Pagination" style="display: flex; gap: 12px;">
    <ul style="list-style: none; padding: 0; margin: 0; display: flex; gap: 12px;">
      {% if page_obj.has_previous %}
        <li>
          <a href="?search={{ search }}&page={{ page_obj.previous_page_number }}" style="padding: 12px 20px; border-radius: 6px; border: 1px solid #1976d2; background: #fff; color: #1976d2; text-decoration: none; font-weight: 600; font-size: 18px; box-shadow: 0 2px 8px rgba(25,118,210,0.04);">&laquo;</a>
        </li>
      {% endif %}
      {% for num in paginator.page_range %}
        {% if num == page_obj.number %}
          <li><span style="padding: 12px 20px; border-radius: 6px; background: #1976d2; color: #fff; font-weight: 700; font-size: 18px; box-shadow: 0 2px 8px rgba(25,118,210,0.12);">{{ num }}</span></li>
        {% elif num >= page_obj.number|add:'-2' and num <= page_obj.number|add:'2' %}
          <li><a href="?search={{ search }}&page={{ num }}" style="padding: 12px 20px; border-radius: 6px; border: 1px solid #1976d2; background: #fff; color: #1976d2; text-decoration: none; font-weight: 600; font-size: 18px; box-shadow: 0 2px 8px rgba(25,118,210,0.04);">{{ num }}</a></li>
        {% endif %}
      {% endfor %}
      {% if page_obj.has_next %}
        <li>
          <a href="?search={{ search }}&page={{ page_obj.next_page_number }}" style="padding: 12px 20px; border-radius: 6px; border: 1px solid #1976d2; background: #fff; color: #1976d2; text-decoration: none; font-weight: 600; font-size: 18px; box-shadow: 0 2px 8px rgba(25,118,210,0.04);">&raquo;</a>
        </li>
      {% endif %}
    </ul>
  </nav>
</div>
</table>
{% endblock %}
